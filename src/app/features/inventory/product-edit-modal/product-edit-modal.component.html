<div class="modal-backdrop" (click)="onBackdropClick($event)">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Editar Producto</h2>
      <button class="btn-close" (click)="onClose()" aria-label="Cerrar">×</button>
    </div>

    <form #editForm="ngForm" (ngSubmit)="onSubmit()" class="modal-body">
      <div class="form-grid">
        <div class="form-group">
          <label for="name">Nombre *</label>
          <input
            type="text"
            id="name"
            [(ngModel)]="formData.name"
            name="name"
            required
            placeholder="Nombre del producto"
          />
        </div>

        <div class="form-group">
          <label for="productCode">Código de Producto *</label>
          <input
            type="text"
            id="productCode"
            [(ngModel)]="formData.productCode"
            name="productCode"
            required
            placeholder="Ej: HAR002"
          />
        </div>

        <div class="form-group">
          <label for="type">Tipo *</label>
          <select id="type" [(ngModel)]="formData.type" name="type" required>
            @for (type of productTypes; track type) {
              <option [value]="type">{{ type }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="unit">Unidad *</label>
          <select id="unit" [(ngModel)]="formData.unit" name="unit" required>
            @for (unit of allowedUnits; track unit) {
              <option [value]="unit">{{ unit }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="unitPrice">Precio Unitario (€) *</label>
          <input
            type="number"
            id="unitPrice"
            [(ngModel)]="formData.unitPrice"
            name="unitPrice"
            required
            min="0"
            step="0.01"
            placeholder="0.00"
          />
        </div>

        <div class="form-group">
          <label for="currentStock">Stock Actual *</label>
          <input
            type="number"
            id="currentStock"
            [(ngModel)]="formData.currentStock"
            name="currentStock"
            required
            min="0"
            step="0.01"
            placeholder="0"
          />
        </div>

        <div class="form-group full-width">
          <label for="supplierId">Proveedor</label>
          <select id="supplierId" [(ngModel)]="formData.supplierId" name="supplierId">
            <option [value]="undefined">Sin proveedor</option>
            @for (supplier of suppliers; track supplier.id) {
              <option [value]="supplier.id">{{ supplier.name }}</option>
            }
          </select>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-delete" (click)="onDelete()">
          Eliminar
        </button>
        <div class="modal-footer-right">
          <button type="button" class="btn-cancel" (click)="onClose()">
            Cancelar
          </button>
          <button type="submit" class="btn-save" [disabled]="!editForm.valid">
            Guardar Cambios
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
