<div class="formulario-producto">
  <h3>{{ isEditing ? 'Editar Producto' : 'Agregar Nuevo Producto' }}</h3>
  <form (ngSubmit)="onSubmit()">
    <div class="form-row">
      <div class="form-group">
        <label for="nombreProducto">Nombre *</label>
        <input
          type="text"
          id="nombreProducto"
          [(ngModel)]="formProduct.name"
          name="name"
          required
        />
      </div>
      <div class="form-group">
        <label for="codigoProducto">Código *</label>
        <input
          type="text"
          id="codigoProducto"
          [(ngModel)]="formProduct.productCode"
          name="productCode"
          placeholder="Ej: ABC-123"
          required
        />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="tipoProducto">Tipo</label>
        <input
          type="text"
          id="tipoProducto"
          [(ngModel)]="formProduct.type"
          name="type"
          placeholder="Ej: Ingrediente"
        />
      </div>
      <div class="form-group">
        <label for="precioProducto">Precio (€) *</label>
        <input
          type="number"
          id="precioProducto"
          [(ngModel)]="formProduct.price"
          name="price"
          step="0.01"
          min="0.01"
          required
        />
      </div>
    </div>

    <!--
    <div class="form-row">
      <div class="form-group">
        <label for="stockProducto">Stock *</label>
        <div
          class="skeleton-input"
          style="height: 40px; border-radius: 4px; background-color: #eee"
        ></div>
        <small style="color: #666; font-size: 0.8em">(Deshabilitado temporalmente)</small>
      </div>
      <div class="form-group">
        <label for="stockMinimoProducto">Stock Mínimo *</label>
        <div
          class="skeleton-input"
          style="height: 40px; border-radius: 4px; background-color: #eee"
        ></div>
        <small style="color: #666; font-size: 0.8em">(Deshabilitado temporalmente)</small>
      </div>
    </div>
    -->

    <div class="form-row">
      <div class="form-group">
        <label for="unidadProducto">Unidad</label>
        <select id="unidadProducto" [(ngModel)]="formProduct.unit" name="unit" required>
          @for (unit of allowedUnits; track unit) {
            <option [value]="unit">{{ unit }}</option>
          }
        </select>
      </div>
      <div class="form-group">
        <label for="proveedorProducto">Proveedor</label>
        <select id="proveedorProducto" [(ngModel)]="formProduct.supplierId" name="supplierId">
          <option [ngValue]="undefined">-- Sin proveedor --</option>
          @for (sup of suppliers; track sup.id) {
            <option [value]="sup.id">{{ sup.name }}</option>
          }
        </select>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-guardar">
        {{ isEditing ? 'Actualizar' : 'Guardar' }}
      </button>

      @if (isEditing) {
        <button type="button" class="btn-eliminar" (click)="onDelete()">Eliminar</button>
      }

      <button type="button" class="btn-cancelar" (click)="onCancel()">Cancelar</button>
    </div>
  </form>
</div>
