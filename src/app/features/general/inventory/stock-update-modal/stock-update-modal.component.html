<div class="modal-overlay" (click)="onOverlayClick($event)">
  <form #stockForm="ngForm" (ngSubmit)="onSubmit()" class="modal-content">
    <div class="modal-header">
      <h2>Actualizar Stock</h2>
      <button type="button" class="modal-close" (click)="onClose()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>

    <div class="modal-body">
      <div class="product-info">
        <p><strong>Producto:</strong> {{ productName }}</p>
        <p *ngIf="product">
          <strong>Stock Actual en Sistema:</strong> {{ product.currentStock }} {{ product.unit }}
        </p>
      </div>

      <div class="form-group">
        <label for="newStock">Nuevo Stock Real *</label>
        <div class="input-group">
          <input
            type="number"
            id="newStock"
            [(ngModel)]="currentStock"
            name="newStock"
            required
            min="0"
            step="0.001"
            placeholder="0"
          />
          <span class="unit-label" *ngIf="product">{{ product.unit }}</span>
        </div>
        <small class="hint">
          El sistema calculará automáticamente la diferencia y registrará un movimiento de AJUSTE.
        </small>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn-cancel" (click)="onClose()">Cancelar</button>
      <button type="submit" class="btn-save" [disabled]="!stockForm.valid">
        Confirmar Ajuste
      </button>
    </div>
  </form>
</div>
